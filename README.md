# E2M Sonar Debug Tool

í”„ë¡œí˜ì…”ë„ ìˆ˜ì¤‘ ìŒíŒŒ íƒì§€ê¸°(Sonar) ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§ ë„êµ¬

## í”„ë¡œì íŠ¸ ê°œìš”

E2M Sonar Debug Toolì€ ìˆ˜ì¤‘ ìŒíŒŒ íƒì§€ê¸° í•˜ë“œì›¨ì–´ì™€ TCP í†µì‹ í•˜ì—¬ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ìˆ˜ì§‘, ì‹œê°í™”, ë¶„ì„í•˜ëŠ” í¬ë¡œìŠ¤ í”Œë«í¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

#### Phase 1 ê¸°ëŠ¥
- âœ… TCP ì†Œì¼“ í†µì‹  (192.168.4.1:36001)
- âœ… Big Endian íŒ¨í‚· íŒŒì‹±
- âœ… ì‹¤ì‹œê°„ Sonar ê·¸ë˜í”„ (Deeper ìŠ¤íƒ€ì¼)
- âœ… GPS ë°ì´í„° íŒŒì‹± (NMEA GNRMC)
- âœ… ë°ì´í„° ë‚´ë³´ë‚´ê¸° (CSV, JSON, Markdown)
- âœ… íŒ¨í‚· ë¡œê¹… ì‹œìŠ¤í…œ
- âœ… ë°˜ì‘í˜• UI (Desktop/Mobile)

#### Phase 2 ê¸°ëŠ¥ (NEW)
- ğŸ†• **ë°ì´í„° ì‹œë®¬ë ˆì´í„°**: í•˜ë“œì›¨ì–´ ì—†ì´ í…ŒìŠ¤íŠ¸
- ğŸ†• **ì„¤ì • ì˜êµ¬ ì €ì¥**: SharedPreferences ê¸°ë°˜
- ğŸ†• **ë‹¤í¬ ëª¨ë“œ**: ì™„ì „í•œ í…Œë§ˆ ì§€ì›
- ğŸ†• **í†µê³„ ëŒ€ì‹œë³´ë“œ**: ìë™ í†µê³„ ê³„ì‚°
- ğŸ†• **ì–´êµ° ìë™ ê°ì§€**: AI ê¸°ë°˜ í´ëŸ¬ìŠ¤í„° ë¶„ì„
- ğŸ†• **ì‹¤ì‹œê°„ ì•Œë¦¼**: ì–´êµ° ê°ì§€ ì•Œë¦¼
- ğŸ†• **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: ì½”ë“œ í’ˆì§ˆ ë³´ì¥

## ë¹ ë¥¸ ì‹œì‘

### ìš”êµ¬ì‚¬í•­
- Flutter SDK 3.x
- Dart SDK 3.x
- Windows/macOS/Linux/Android/iOS

### ì„¤ì¹˜

```bash
# í”„ë¡œì íŠ¸ í´ë¡ 
cd sonar_debug_tool

# ì˜ì¡´ì„± ì„¤ì¹˜
flutter pub get

# Windows ë¹Œë“œ
flutter build windows --release

# ì‹¤í–‰ íŒŒì¼
build\windows\x64\runner\Release\sonar_debug_tool.exe
```

### ì‹œë®¬ë ˆì´í„° ëª¨ë“œë¡œ ì‹œì‘

í•˜ë“œì›¨ì–´ ì—†ì´ ì¦‰ì‹œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. ì•± ì‹¤í–‰
2. ì„¤ì • ì•„ì´ì½˜ í´ë¦­
3. "ì‹œë®¬ë ˆì´í„° ì‚¬ìš©" í™œì„±í™”
4. "ì €ì¥" ë²„íŠ¼ í´ë¦­
5. í™ˆ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
6. "ì—°ê²°" ë²„íŠ¼ í´ë¦­
7. "ë¬¼ì† ì§„ì…" ë²„íŠ¼ìœ¼ë¡œ ë°ì´í„° ìƒì„±

### ì‹¤ì œ í•˜ë“œì›¨ì–´ ì—°ê²°

1. ì„¤ì •ì—ì„œ IP ì£¼ì†Œ ì…ë ¥ (ê¸°ë³¸ê°’: 192.168.4.1)
2. í¬íŠ¸ ì…ë ¥ (ê¸°ë³¸ê°’: 36001)
3. "ì‹œë®¬ë ˆì´í„° ì‚¬ìš©" ë¹„í™œì„±í™”
4. "ì €ì¥" í›„ ì—°ê²°

## ë¬¸ì„œ

- **[Phase 1 ê°œë°œ ë³´ê³ ì„œ](DEVELOPMENT_COMPLETE.md)**: ì´ˆê¸° ê°œë°œ ì™„ë£Œ ë³´ê³ ì„œ
- **[Phase 2 ê¸°ëŠ¥ ê°€ì´ë“œ](PHASE2_FEATURES.md)**: ìµœì‹  ê¸°ëŠ¥ ìƒì„¸ ì„¤ëª…
- **[ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ](QUICK_START.md)**: ì‚¬ìš©ì ê°€ì´ë“œ
- **[ìµœì¢… ìš”ì•½](FINAL_SUMMARY.md)**: Phase 1 ìš”ì•½

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
lib/
â”œâ”€â”€ main.dart                     # ì•± ì§„ì…ì 
â”œâ”€â”€ models/                       # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ sonar_data.dart          # ì†Œë‚˜ ë°ì´í„°
â”‚   â”œâ”€â”€ gps_data.dart            # GPS ë°ì´í„°
â”‚   â”œâ”€â”€ packet_log.dart          # íŒ¨í‚· ë¡œê·¸
â”‚   â””â”€â”€ connection_state.dart    # ì—°ê²° ìƒíƒœ
â”œâ”€â”€ services/                     # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ tcp_service.dart         # TCP í†µì‹ 
â”‚   â”œâ”€â”€ packet_parser.dart       # íŒ¨í‚· íŒŒì‹±
â”‚   â”œâ”€â”€ command_builder.dart     # ëª…ë ¹ ìƒì„±
â”‚   â”œâ”€â”€ export_service.dart      # ë°ì´í„° ë‚´ë³´ë‚´ê¸°
â”‚   â”œâ”€â”€ data_simulator.dart      # ë°ì´í„° ì‹œë®¬ë ˆì´í„°
â”‚   â”œâ”€â”€ simulator_tcp_service.dart # ì‹œë®¬ë ˆì´í„° ë˜í¼
â”‚   â”œâ”€â”€ settings_service.dart    # ì„¤ì • ì €ì¥
â”‚   â””â”€â”€ fish_detector.dart       # ì–´êµ° ê°ì§€
â”œâ”€â”€ providers/                    # ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ sonar_provider.dart      # ì†Œë‚˜ ìƒíƒœ
â”‚   â””â”€â”€ theme_provider.dart      # í…Œë§ˆ ìƒíƒœ
â”œâ”€â”€ widgets/                      # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ connection_bar.dart      # ì—°ê²° ë°”
â”‚   â”œâ”€â”€ status_dashboard.dart    # ìƒíƒœ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ control_panel.dart       # ì œì–´ íŒ¨ë„
â”‚   â”œâ”€â”€ packet_logger.dart       # íŒ¨í‚· ë¡œê±°
â”‚   â”œâ”€â”€ sonar_graph.dart         # ì†Œë‚˜ ê·¸ë˜í”„
â”‚   â”œâ”€â”€ export_menu.dart         # ë‚´ë³´ë‚´ê¸° ë©”ë‰´
â”‚   â”œâ”€â”€ gps_display.dart         # GPS í‘œì‹œ
â”‚   â”œâ”€â”€ statistics_dashboard.dart # í†µê³„ ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ fish_alert.dart          # ì–´êµ° ì•Œë¦¼
â”œâ”€â”€ screens/                      # í™”ë©´
â”‚   â”œâ”€â”€ home_screen.dart         # í™ˆ í™”ë©´
â”‚   â”œâ”€â”€ settings_screen.dart     # ì„¤ì • í™”ë©´ (êµ¬ë²„ì „)
â”‚   â””â”€â”€ settings_screen_v2.dart  # ì„¤ì • í™”ë©´ V2
â””â”€â”€ theme/                        # í…Œë§ˆ
    â””â”€â”€ app_theme.dart           # ë¼ì´íŠ¸/ë‹¤í¬ í…Œë§ˆ
test/
â”œâ”€â”€ packet_parser_test.dart      # íŒ¨í‚· íŒŒì„œ í…ŒìŠ¤íŠ¸
â””â”€â”€ gps_data_test.dart           # GPS í…ŒìŠ¤íŠ¸
```

## ê¸°ìˆ  ìŠ¤íƒ

### Flutter & Dart
- Flutter 3.x
- Dart 3.x
- Material Design 3

### ìƒíƒœ ê´€ë¦¬
- Provider íŒ¨í„´
- ChangeNotifier

### ì˜ì¡´ì„±
```yaml
dependencies:
  flutter:
    sdk: flutter
  provider: ^6.1.1
  intl: ^0.19.0
  path_provider: ^2.1.1
  shared_preferences: ^2.2.2

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.0
```

## TCP í”„ë¡œí† ì½œ

### íŒ¨í‚· êµ¬ì¡°

#### ë¬¼ ë°– íŒ¨í‚· (7ë°”ì´íŠ¸)
```
[0x55 0xAA] [ê¸¸ì´:2] [0x01] [ë°°í„°ë¦¬%] [ì²´í¬ì„¬]
```

#### ë¬¼ì† íŒ¨í‚· (182ë°”ì´íŠ¸)
```
[í—¤ë”:2] [ê¸¸ì´:2] [íƒ€ì…] [ë°°í„°ë¦¬] [ì²´í¬ì„¬]
[ìˆ˜ì˜¨:4] [ìŠ¤ìº”ê¹Šì´:4] [ì£¼íŒŒìˆ˜:4] [ì†Œë‚˜ìƒ˜í”Œ:90] [GPS:68] [ì²´í¬ì„¬]
```

### Endianness
- **í”„ë ˆì„ ê¸¸ì´**: Little Endian (2ë°”ì´íŠ¸)
- **ëª¨ë“  ë°ì´í„°**: Big Endian (Float32, Int32)

### ì œì–´ ëª…ë ¹
- **ì£¼íŒŒìˆ˜ ë³€ê²½**: `[0x55 0xAA 0x05 0x00 0x02 {freq} 0x00 ì²´í¬ì„¬]`
  - 83kHz: 0x01
  - 200kHz: 0x02
  - 455kHz: 0x03

## í™”ë©´ êµ¬ì„±

### Desktop ë ˆì´ì•„ì›ƒ (> 900px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì—°ê²° ë°”]                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status   â”‚              â”‚   Control       â”‚
â”‚ GPS      â”‚ Sonar Graph  â”‚   Panel         â”‚
â”‚ Stats    â”‚              â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Packet Logger                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  + Fish Alert (ì˜¤ë²„ë ˆì´)
```

### Mobile ë ˆì´ì•„ì›ƒ (< 900px)
5ê°œ íƒ­:
1. Status - ìƒíƒœ ì •ë³´
2. Sonar - ì†Œë‚˜ ê·¸ë˜í”„
3. Control - ì œì–´ íŒ¨ë„
4. Stats - í†µê³„ ëŒ€ì‹œë³´ë“œ
5. Logs - íŒ¨í‚· ë¡œê·¸

## ì–´êµ° ê°ì§€ ì•Œê³ ë¦¬ì¦˜

### íŒŒë¼ë¯¸í„°
- ìµœì†Œ ì‹ í˜¸ ê°•ë„: 0x05
- ìµœì†Œ í´ëŸ¬ìŠ¤í„° í¬ê¸°: 3
- ë°”ë‹¥ ë§ˆì§„: 2.0m

### ì‹ ë¢°ë„ ê³„ì‚°
```
ì‹ ë¢°ë„ = (ì‹ í˜¸ê°•ë„ Ã— 0.5) + (í´ëŸ¬ìŠ¤í„°í¬ê¸° Ã— 0.3) + (ì•ˆì •ì„± Ã— 0.2)
```

### ì•Œë¦¼ ì¡°ê±´
- ì‹ ë¢°ë„ > 60%
- ë°”ë‹¥ ì‹ í˜¸(0x0F) ì œì™¸
- ìµœì†Œ 3ê°œ ì—°ì† ìƒ˜í”Œ

## ë°ì´í„° ë‚´ë³´ë‚´ê¸°

### CSV í˜•ì‹
```csv
Timestamp,In Water,Water Temp,Scan Depth,Frequency,Battery,GPS
2024-01-15 10:30:45,true,15.2,5.3,200000,85,37.5665,126.9780
```

### JSON í˜•ì‹
```json
{
  "timestamp": "2024-01-15T10:30:45",
  "inWater": true,
  "waterTemp": 15.2,
  "scanDepth": 5.3,
  "frequency": 200000,
  "batteryPercent": 85,
  "gps": {
    "latitude": 37.5665,
    "longitude": 126.9780
  }
}
```

### Markdown í˜•ì‹
ì„¸ì…˜ ë¦¬í¬íŠ¸ í˜•íƒœë¡œ í†µê³„ í¬í•¨

## í…ŒìŠ¤íŠ¸

```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test

# íŠ¹ì • í…ŒìŠ¤íŠ¸
flutter test test/packet_parser_test.dart
flutter test test/gps_data_test.dart
```

## ë¹Œë“œ

### Windows
```bash
flutter build windows --release
```

### macOS
```bash
flutter build macos --release
```

### Android
```bash
flutter build apk --release
```

### iOS
```bash
flutter build ios --release
```

## ê°œë°œ ë¡œë“œë§µ

### ì™„ë£Œ (Phase 1 & 2)
- [x] TCP í†µì‹ 
- [x] íŒ¨í‚· íŒŒì‹±
- [x] Sonar ê·¸ë˜í”„
- [x] GPS íŒŒì‹±
- [x] ë°ì´í„° ë‚´ë³´ë‚´ê¸°
- [x] ë°ì´í„° ì‹œë®¬ë ˆì´í„°
- [x] ë‹¤í¬ ëª¨ë“œ
- [x] í†µê³„ ëŒ€ì‹œë³´ë“œ
- [x] ì–´êµ° ê°ì§€
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

### í–¥í›„ ê³„íš
- [ ] ì–´êµ° ì´ë™ ê²½ë¡œ ì¶”ì 
- [ ] ê·¸ë˜í”„ ì¤Œ/íŒ¨ë‹
- [ ] í´ë¼ìš°ë“œ ë™ê¸°í™”
- [ ] ë‹¤ì¤‘ ì¥ì¹˜ ì§€ì›
- [ ] ìŒì„± ì•Œë¦¼
- [ ] ì„±ëŠ¥ ìµœì í™”

## ë¼ì´ì„ ìŠ¤

MIT License

## ê¸°ì—¬

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ì—°ë½ì²˜

E2M - Sonar Debug Tool Team

Project Link: [https://github.com/e2m/sonar_debug_tool](https://github.com/e2m/sonar_debug_tool)

## ê°ì‚¬ì˜ ë§

- Flutter íŒ€
- Provider íŒ¨í‚¤ì§€ ê°œë°œì
- ëª¨ë“  ê¸°ì—¬ìë¶„ë“¤

---

**ë²„ì „**: 2.0.0
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024-01-15
**ê°œë°œ ê¸°ê°„**: Phase 1 + Phase 2 (ì´ 24ì‹œê°„)
